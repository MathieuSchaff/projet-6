(()=>{"use strict";let e=new Request("data.json",{method:"GET",headers:{Accept:"application/json","Content-type":"application/json"},mode:"cors",cache:"default"});const t=async()=>{let t=await fetch(e);return await t.json()};async function n(){let e=await(async()=>{let{photographers:e}=await t();return e})(),n=new URLSearchParams(window.location.search);for(let t=0;t<e.length;t++)if(e[t].id==n.get("id"))return e[t]}async function a(){let e=await(async()=>{let{media:e}=await t();return e})(),n=new URLSearchParams(window.location.search),a=[];return e.forEach((e=>{e.photographerId==n.get("id")&&a.push(e)})),a}const r=e=>{if("string"==typeof e)return document.createTextNode(e);const t=document.createElement(e.tag);return e.props&&Object.entries(e.props).forEach((([e,n])=>{t[e]=n})),e.children&&e.children.forEach((e=>{t.appendChild(r(e))})),t},o=(e,t,n)=>({tag:e,props:t,children:n}),i=(e,t,n)=>{if(!t&&""!==t)return e.remove();if("string"==typeof n||"string"==typeof t){if(n!==t)return e.replaceWith(r(t))}else{if(n?.tag!==t.tag)return e.replaceWith(r(t));if(n){for(const a in n.props)if(n.props[a]===t.props[a])return e.replaceWith(r(t));for(let a=e.childNodes.length-1;a>=0;a--)i(e.childNodes[a],t.children[a],n.children[a])}}};function l(e){return o("a",{className:"header__logo",href:"index.html"},[e])}function s(){return o("img",{src:"./images/logo.svg",alt:"Fisheye page d'acceuil",role:"img",tabindex:"0"})}function c(e){let t=e[0].toUpperCase()+e.slice(1);return o("button",{id:`${e}`,className:"nav--button",type:"button",tabindex:"0",role:"menuitem",value:`${e}`},[`#${t}`])}function d(e){return o("div",{className:"photographer-main"},[e])}function u(e,t,n,a){return o("div",{className:"photographer-profile"},[e,t,n,a])}function m(e){return o("p",{className:"photographer-profile--philosophy"},[e])}function p(e){return o("div",{className:"img"},[e])}function h(e){return o("div",{className:"containerTags"},e)}function f(e,t){return o("div",{className:"formData"},[e,t])}function y(e,t){return o("label",{for:`${e}`},[`${t}`])}function v(e,t,n,a){return o("input",{className:`text-control ${a}`,type:`${e}`,id:`${t}`,name:`${t}`,ariaLabel:`${n}`,required:"true"},void 0)}async function b(){let e=await n();const t=(await a()).map((e=>e.likes)).reduce(((e,t)=>e+t),0);let r=document.querySelector(".totalLikes--number");r.innerHTML=`${t}`,document.querySelector(".salaire--journalier").innerHTML=`${e.price}€ / jour`,document.querySelectorAll(".heart").forEach((e=>{e.addEventListener("click",(()=>{r.textContent=`${Number(r.textContent)+1}`,e.firstElementChild.textContent=`${Number(e.firstElementChild.textContent)+1}`}))}))}function g(e,t){return o("figure",void 0,[e,t])}function w(e,t){return o("figcaption",void 0,[e,t])}function x(e){return o("p",{className:"textfig"},[e])}function L(e){return o("button",{className:"heart",tabIndex:"0",ariaLabel:`Nombre de likes ${e}`},[o("div",{className:"likes"},[`${e}`]),o("i",{className:"fas fa-heart"})])}const S=async e=>{let t=await n(),r=await(async e=>{let t=await a();switch(e){case"Date":t.forEach((e=>{let t=e.date.split("-").join(" "),n=new Date(t);e.date=n})),t.sort(((e,t)=>t.date-e.date));break;default:t.sort(((e,t)=>t.likes-e.likes));break;case"Titre":t.sort((function(e,t){return e.title.localeCompare(t.title)}))}return t})(e);return o("main",{className:"sectioncontainer",role:"main"},r.map((e=>{return Object.keys(e).includes("image")?g((r=t.name,i=e.image,l=e.altTextMedia,o("img",{src:`./FishEyePhotos/Sample Photos/${r}/${i.replace(".jpg","")}_resultat.jpg`,className:"img-card",alt:`${l}`,tabIndex:"0"},void 0)),w(x(e.title),L(e.likes))):g((n=function(e,t,n){return o("source",{src:`./FishEyePhotos/Sample Photos/${e}/${t}`,className:"img-card",type:"video/mp4",alt:`${n}`},void 0)}(t.name,e.video,e.altTextMedia),a=e.altTextMedia,o("video",{className:"img-card",muted:!0,controls:!0,title:`${a}`},[n])),w(x(e.title),L(e.likes)));var n,a,r,i,l})))},E=()=>{const e=[...document.querySelectorAll(".img-card")],t=[...document.querySelectorAll("img.img-card, source")].map((e=>`${e.src}`));e.forEach((e=>{e.addEventListener("click",(n=>{let a=document.createElement("div");function r(e){a.classList.add("fadeOut"),window.setTimeout((()=>{a.remove(),a=null}),500)}function o(){n.preventDefault();let r=a.querySelector("img, video");r.currentSrc.endsWith("mp4")&&(r=r.querySelector("source"));let o=t.findIndex((e=>e===r.src));o+=1,o>=t.length&&(o=0),t[o].endsWith("mp4")?a.querySelector(".lightbox__container").innerHTML=`\n          <video class="img-card" muted  controls>\n          <source src="${t[o]}" type="video/mp4" alt="${e.alt}">\n  \n          </video>\n          `:a.querySelector(".lightbox__container").innerHTML=`\n          <img src="${t[o]}" alt="${e.alt}">\n          `}function i(){n.preventDefault();let r=a.querySelector("img, video");r.currentSrc.endsWith("mp4")&&(r=r.querySelector("source"));let o=t.findIndex((e=>e===r.src));o-=1,o<0&&(o=t.length-1),t[o].endsWith("mp4")?a.querySelector(".lightbox__container").innerHTML=`\n          <video class="img-card" muted  controls>\n          <source src="${t[o]}" type="video/mp4" alt="${e.alt}">\n  \n          </video>\n          `:a.querySelector(".lightbox__container").innerHTML=`\n          <img src="${t[o]}" alt="${e.alt}">\n          `}a.classList.add("lightbox"),a.setAttribute("role","dialog"),a.setAttribute("ariaLabel","image agrandie"),a.setAttribute("title","image agrandie"),"IMG"==e.nodeName?a.innerHTML=`\n        <button class="lightbox__close" tab-index="1" aria-label="fermer"><span class="sr-only"> Fermer </span></button>\n          <button class="lightbox__next" tab-index="1" aria-label="suivant"><span class="sr-only"> Suivant </span></button>\n          <button class="lightbox__prev"tab-index="1" aria-label="précédent"><span class="sr-only"> Précédent </span></button>\n  \n          <div class="lightbox__container">\n           <img src="${e.src}" alt="${e.alt}" tab-index="1">\n          </div>\n        `:(e.pause(),a.innerHTML=`\n          <button class="lightbox__close">Fermer</button>\n          <button class="lightbox__next">Suivant</button>\n          <button class="lightbox__prev">Précédent</button>\n  \n          <div class="lightbox__container">\n          <video class="img-card" muted  controls>\n          <source src="${e.currentSrc}" type="video/mp4" alt="${e.alt}">\n  \n          </video>\n          </div>\n        `),a.querySelector(".lightbox__close").addEventListener("click",r),a.querySelector(".lightbox__prev").addEventListener("click",i),a.querySelector(".lightbox__next").addEventListener("click",o),window.addEventListener("keydown",(function(e){null!==a&&"Escape"===e.key&&r(),null!==a&&"ArrowLeft"===e.key&&i(),null!==a&&"ArrowRight"===e.key&&o(),null!==a&&"Tab"===e.key&&function(e){e.preventDefault();let t=Array.from(document.querySelectorAll(".lightbox__prev, .lightbox__next, .lightbox__close, .lightbox__container img")),n=t.findIndex((e=>e===document.querySelector(":focus")));!0===e.shiftKey?n--:n++,n>=t.length-1&&(n=0),n<0&&(n=t.length-1),t[n].focus()}(e)})),document.body.appendChild(a),document.querySelector(".lightbox__close").focus()}))}))};async function _(e){let n,{photographers:a}=await t();if(null==e||""==e.toLocaleString())return a;{let t=[],r=[];n=e;for(const[e,r]of n.entries())for(let n=0;n<a.length;n++)a[n].tags.includes(e)&&t.push(a[n]);return r=[...t.reduce(((e,t)=>e.set(t.id,t)),new Map).values()],r}}function N(e){return o("p",{className:"main__name"},[e])}function k(e){return o("div",{className:"tags"},e)}async function $(e){let t=await e;return o("main",{id:"articles"},t.map((e=>{let t=e.tags.map((e=>{return o("button",{className:"nav--button tagTri",type:"button",value:`${t=e}`},[`#${t}`]);var t}));return o("article",{className:"main"},[o("a",{href:`http://127.0.0.1:5500/index.html?id=${e.id}`,className:"main__link"},[(l=e.portrait,s=e.name,o("img",{className:"main__photo",src:`./FishEyePhotos/Sample Photos/Photographers ID Photos/${l}`,alt:`Portrait du photographe ${s}`},void 0)),N(e.name)]),o("p",{className:"main__paragraph"},[(r=e.city,i=e.country,o("p",{className:"main__location"},[`${r}, ${i}`])),(a=e.tagline,o("p",{className:"main__philosophy"},[a])),(n=e.price,o("p",{className:"main__tarif"},[`${n} €`])),k(t)])]);var n,a,r,i,l,s})))}let q,A;const T=async e=>{let t=new URLSearchParams(window.location.search),n=new URLSearchParams(window.location.search);t.has(e)?t.delete(e):null!==e&&t.append(e,!0),q=await $(_(n)),A=await $(_(t));let a=t.toLocaleString();history.pushState({},null,`?${a}`);let r=document.getElementById("articles");i(r,A,q);const o=document.querySelectorAll("button.nav--button");for(let e=0;e<o.length;e++)for(const[n,a]of t.entries())o[e].value==n?o[e].classList.add("focused"):o[e].classList.contains("focused")&&o[e].value!=n&&o[e].classList.remove("focused");const l=document.querySelectorAll("nav button.nav--button");let s=[];for(var c of t.keys())s.push(c);for(let e=0;e<l.length;e++)l[e].classList.contains("focused")&&l[e].classList.remove("focused");for(let e=0;e<l.length;e++)s.includes(l[e].value)&&l[e].classList.add("focused");o.forEach((e=>{e.addEventListener("click",(()=>{T(e.value)}))}))};async function P(){let e=document.querySelector(".wrapper");e.innerHTML="",async function(){return o("header",{className:"header"},[l(s()),o("nav",{className:"header__nav",ariaLabel:"trier par catégorie",tabindex:"0",role:"navigation"},[c("portrait"),c("art"),c("fashion"),c("architecture"),c("travel"),c("sport"),c("animals"),c("events")]),o("h1",{className:"header__title",tabindex:"0"},["Nos photographes"])])}().then((t=>{let n=r(t);e.appendChild(n)})),async function(){return o("a",{href:"#",alt:"redirect to main content",className:"redirect",ariaModal:"true",ariaLabel:"modal is loaded",role:"dialog",ariaHidden:"true",ariaExpanded:"false"},["Passer au contenu"])}().then((e=>{let t=r(e);document.body.insertAdjacentElement("afterbegin",t);const n=document.querySelector(".redirect");window.addEventListener("scroll",(()=>{window.scrollY>0?(n.style.display="flex",n.setAttribute("tabindex",1),n.setAttribute("aria-expanded","true")):(n.style.display="none",n.setAttribute("tabindex",-1),n.setAttribute("aria-expanded","false"))}))}));let t=new URLSearchParams(window.location.search),n=await $(_(t)),a=r(n);e.insertAdjacentElement("beforeEnd",a);const i=document.querySelectorAll("button.nav--button"),d=document.querySelectorAll("nav button.nav--button");let u=[];for(var m of t.keys())u.push(m);for(let e=0;e<d.length;e++)u.includes(d[e].value)&&d[e].classList.add("focused");i.forEach((e=>{e.addEventListener("click",(()=>{T(e.value)}))}))}""===window.location.search||window.location.search.endsWith("true")?P():window.location.search.startsWith("?id")?async function(){document.querySelector(".wrapper").innerHTML="",async function(){return o("header",{role:"banner"},[l(s())])}().then((e=>{let t=r(e);document.querySelector(".wrapper").insertAdjacentElement("afterbegin",t)})),async function(){let e=await n(),t=e.tags.map((e=>{return o("a",{className:"nav--button button--photographer",href:`index.html?${t=e}=true`,value:`${t}`},[`#${t}`,o("span",{className:"sr-only"},[`#${t}`])]);var t}));var a,r,i,l;return o("section",{className:"photographer-header",role:"region"},[d(u((l=e.name,o("h1",{className:"photographer-profile--name"},[l])),(r=e.city,i=e.country,o("h2",{className:"photographer-profile--location"},[` ${r}, ${i}`])),m(e.tagline),h(t))),o("button",{className:"contact-me"},["Contactez-moi"]),p((a=e.portrait,o("img",{className:"photographer-profile--photo",alt:"Photo portrait du photographe",src:`./FishEyePhotos/Sample Photos/Photographers ID Photos/${a}`},void 0)))])}().then((e=>{let t=r(e);document.querySelector(".wrapper").insertAdjacentElement("beforeend",t)})).then((()=>{let e=r(o("aside",{className:"contact-modal",ariaHidden:"true",ariaLabelledby:"contact__title",style:"display: none"},[o("div",{className:"modal--wrapper"},[o("header",{id:"form-header"},[o("h1",{id:"contact__title"},["Contactez moi",o("span",{className:"contact-name"},["Mimi Keel"])]),o("a",{href:"",id:"closeButton",className:"close",ariaLabel:"Fermer le formulaire"},[o("img",{src:"images/cross2.svg",alt:"cross"},void 0)])]),o("form",{id:"form",role:"form",name:"fisheye"},[f(y("first","Prénom"),v("text","first","prénom")),f(y("last","Nom"),v("text","last","nom de famille")),f(y("email","E-mail"),v("email","email","email")),f(y("comment","Votre message"),("comment","commentaire","comment",o("textarea",{className:"text-control comment",id:"comment",ariaLabel:"commentaire",required:"true"},void 0))),o("input",{className:"submit",value:"Envoyer",ariaLabel:"send",type:"submit"},void 0)])])]));document.querySelector(".wrapper").appendChild(e)})).then((()=>{(async()=>{let e=await n();document.querySelector(".contact-name").innerHTML=`${e.name}`;const t=document.getElementById("closeButton");let a=null;const r=document.querySelector(".contact-me");let o=[];document.querySelector("input[type=submit]");const i=function(e){e.preventDefault(),window.setTimeout((function(){a.style.display="none"}),300),t.removeEventListener("click",i),a.removeEventListener("click",i),document.querySelector(".modal--wrapper").removeEventListener("click",l),document.querySelector(".contact-me").style.zIndex="1",document.querySelector("#Order-wrapper").style.zIndex="20",r.focus()};r.addEventListener("click",(function(e){e.preventDefault(),a=document.querySelector(".contact-modal"),o=Array.from(a.querySelectorAll("button, a, input, textarea")),o[0].focus(),a.style.display=null,a.removeAttribute("aria-hidden"),a.setAttribute("aria-modal",!0),t.addEventListener("click",i),a.addEventListener("click",i),document.querySelector(".modal--wrapper").addEventListener("click",l),document.querySelector(".contact-me").style.zIndex="-1",document.querySelector("#Order-wrapper").style.zIndex="0"}));const l=function(e){e.stopPropagation()};addEventListener("submit",(()=>{document.querySelectorAll(".text-control").forEach((e=>{console.log(`Input = ${e.ariaLabel}; value = ${e.value}`)}))})),window.addEventListener("keydown",(function(e){"Escape"!==e.key&&"Esc"!==e.key||null===a||i(e),"Tab"!==e.key&&"ArrowDown"!==e.key&&"ArrowUp"!==e.key||null===a||function(e){e.preventDefault();let t=o.findIndex((e=>e===a.querySelector(":focus")));!0===e.shiftKey||"ArrowUp"===e.key?t--:t++,t>=o.length&&(t=0),t<0&&(t=o.length-1),o[t].focus()}(e)}))})()})).then((()=>{(async function(){var e,t;return o("div",{className:"sort"},[o("span",{id:"Order_by"},["Trier par"]),(e=o("button",{id:"sort_button",role:"button",ariaHasPopup:"listbox","aria-labelledby":"Order_by sort_button",ariaExpanded:"false",className:"choose",value:"popularité"},[o("span",{className:"sortBy"},["Popularité"]),o("i",{className:"chevron fas fa-chevron-up",ariaHidden:"true"},void 0)]),t=o("ul",{id:"tri",role:"listbox",ariaLabelledby:"Order_by",tabIndex:"-1",style:"display: none"},[o("li",{id:"pop",className:"choose",role:"option"},["Popularité"]),o("li",{className:"chevronRotate"},[o("i",{className:"chevron fas fa-chevron-up",ariaHidden:"true"},void 0)]),o("li",{className:"dropdown-divider",role:"separator",tabIndex:"-1"},void 0),o("li",{id:"titre",className:"choose",role:"option"},["Titre"]),o("li",{className:"dropdown-divider",role:"separator",tabIndex:"-1"},void 0),o("li",{id:"date",className:"choose",role:"option"},["Date"])]),o("div",{id:"Order-wrapper"},[e,t]))])})().then((e=>{let t=r(e);document.querySelector(".wrapper").insertAdjacentElement("beforeend",t)})).then((()=>{(async()=>{const e=document.getElementById("sort_button");let t=0,n=null,a=[];const r=function(t){null===n&&(n=document.getElementById("tri"),e.setAttribute("aria-expanded",!0),a=Array.from(document.querySelectorAll("li.choose")),a[0].focus(),a[0].classList.add("buttonSortClicked"),a[0].setAttribute("aria-selected",!0),n.style.display=null,n.querySelector(".chevronRotate").classList.add("activateRotate"),document.getElementById("Order-wrapper").addEventListener("click",l),a.forEach((t=>t.addEventListener("click",(function(){t.setAttribute("aria-selected",!0),e.value=t.innerText.trim(),e.querySelector("span").innerText=t.innerText.trim(),o()})))),document.addEventListener("click",o))};async function o(){if(null==n)return;e.removeEventListener("click",o),document.getElementById("Order-wrapper").removeEventListener("click",l),document.removeEventListener("click",o),e.setAttribute("aria-expanded",!1),n.style.display="none",e.focus(),a[t].classList.remove("buttonSortClicked"),n.querySelector(".chevronRotate").classList.remove("activateRotate");let r=document.querySelector(".sectioncontainer"),s=await S(e.value);i(r,s),E(),b(),n=null}e.addEventListener("click",(()=>{r()}));const l=function(e){e.stopPropagation()};window.addEventListener("keydown",(function(r){"Tab"===r.key&&null!==n&&o(),"Escape"!==r.key&&"Esc"!==r.key||o(),"ArrowDown"!==r.key&&"ArrowUp"!==r.key||null===n||function(r){r.preventDefault(),a[0].classList.remove("buttonSortClicked"),a[t].setAttribute("aria-selected",!1),a[t].classList.remove("buttonSortClicked"),!0===r.shiftKey||"ArrowUp"===r.key?t--:t++,t>=a.length&&(t=0),t<0&&(t=a.length-1),a[t].focus(),a[t].setAttribute("aria-selected",!0),e.setAttribute("value",a[t].innerText.trim()),e.querySelector("span").innerText=a[t].innerText.trim(),n.setAttribute("aria-activedescendant",a[t].id),a[t].classList.add("buttonSortClicked")}(r)})),window.addEventListener("keydown",(function(e){"Enter"===e.key&&null!==n&&o()})),e.addEventListener("keydown",(function(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||null!=n||r()}))})()}))})).then((()=>{S().then((e=>{let t=r(e);document.querySelector(".wrapper").insertAdjacentElement("beforeEnd",t),E()}))})).then((()=>{(async function(){return o("aside",{className:"likesContainer",role:"complimentary"},[o("div",{className:"totalLikes"},[o("p",{className:"totalLikes--number"},void 0),o("p",{className:"totalLikes--heart"},[o("img",{src:"./images/heart.svg",role:"img",alt:"coeur"},void 0)])]),o("div",{className:"salaire"},[o("p",{className:"salaire--journalier"},void 0)])])})().then((e=>{let t=r(e);document.querySelector(".wrapper").insertAdjacentElement("beforeEnd",t)})).then((()=>{b()}))}))}():(window.location.search="",history.pushState({},null,"index.html"),P())})();